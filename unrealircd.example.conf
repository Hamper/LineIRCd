/* <<< ОСНОВНОЙ ФАЙЛ КОНФИГУРАЦИИ СЕРВЕРА >>>
 * Он должен находиться в основном каталоге IRCd и называться 'unrealircd.conf'.
 * В данном образце не приводится полное описание конфигурации. Указанной
 * информации достаточно для настройки сервера, предназначенного для
 * линковки в сеть IRCLine.RU. Оригинальный образец и документация UnrealIRCd
 * находятся в каталоге doc.
 */

/* ИДЕНТИФИКАЦИЯ СЕРВЕРА
 * Данный блок должен быть отредактирован
 */

me {
	// Название сервера - желательно реальное DNS имя
	name "newserver.ircline.ru";
	// Описание сервера: название локальной сети, в скобках - страна и город
	// Описание пишется английскими буквами
	info "LocalNetwork (Russia, Moscow)";
	// Номер сервера. Выдается администрацией сети при линковке
	// Для изменения номера обязателен ПЕРЕЗАПУСК сервера
	numeric 1;
};

/* АДМИНИСТРАТОР СЕРВЕРА
 * Данный блок должен быть отредактирован
 * Администратором сервера в IRCLine.RU может быть назван только тот,
 * кто в любой момент может внести изменения в настройки и обновить IRCd
 */

admin {
	"JSergey"; /* Ник */
	"Sergey Zhuravlev"; /* Реальное имя */
	"mail@mail.mail"; /* E-Mail */
};

/* КЛАССЫ СОЕДИНЕНИЙ
 * Данный блок редактировать не требуется
 */

class clients {
	pingfreq 90;
	maxclients 500;
	sendq 100000;
	recvq 8000;
};

class clients_mobile {
	pingfreq 600;
	maxclients 500;
	sendq 100000;
	recvq 8000;
};

class opers {
	pingfreq 90;
	maxclients 50;
	sendq 500000;
	recvq 10000;
};

class servers {
	pingfreq 90;
	maxclients 10;
	sendq 1000000;
	connfreq 60; /* Частота попыток автоматического соединения (в секундах) */
};

/* РАЗРЕШЕННЫЕ СОЕДИНЕНИЯ
 * Данный блок редактировать не требуется
 */

allow {
	ip *@*;
	hostname *@*;
	class clients;
};

allow {
	ip *@*;
	hostname *@*;
	options {
		mobile;
	};
	class clients_mobile;
};

/* ПОРТЫ */
/* Данный блок настраивается по желанию администратора
 */

listen *:6665 {options {clientsonly; cp_utf;};};
listen *:6666 {options {clientsonly; cp_dos;};};
listen *:6667 {options {clientsonly; cp_win;};};
listen *:6668 {options {clientsonly; cp_koi;};};
listen *:6669 {options {clientsonly; cp_mac;};};
listen *:9997 {options {serversonly;};};

/* Раскомментируйте следующие строки, если есть поддержка SSL
 * Если поддержки SSL нет - не забудьте удалить описание SSL портов
 * из ircd.motd
 */
/*
listen *:6695 {options {ssl; clientsonly; cp_utf;};};
listen *:6696 {options {ssl; clientsonly; cp_dos;};};
listen *:6697 {options {ssl; clientsonly; cp_win;};};
listen *:6698 {options {ssl; clientsonly; cp_koi;};};
listen *:6699 {options {ssl; clientsonly; cp_mac;};};
listen *:9967 {options {ssl; serversonly;};};
*/

/* Порты для пользователей мобильных IRC клиентов */
listen *:6675 {options {clientsonly; mobile; cp_utf;};};
listen *:6676 {options {clientsonly; mobile; cp_dos;};};
listen *:6677 {options {clientsonly; mobile; cp_win;};};
listen *:6678 {options {clientsonly; mobile; cp_koi;};};
listen *:6679 {options {clientsonly; mobile; cp_mac;};};

/* СПЕЦИАЛЬНЫЙ MOTD ДЛЯ МОБИЛЬНЫХ ПОЛЬЗОВАТЕЛЕЙ */

tld {
	mask *@*;
	motd "mobile.motd";
	rules "ircd.rules";
	options {
		mobile;
	};
};

/* ОПЕРАТОРЫ
 * Данный блок должен быть отредактирован в соответствии с указаниями
 * администрации сети, к которой прилинкован сервер.
 *
 * Уровни доступа для параметра level:
 * local - Локальный IRC оператор
 * global - Глобальный IRC оператор
 * admin - Администратор сервера (администратором сервера в IRCLine.RU
 * может быть назван только тот, кто в любой момент может внести изменения
 * в настройки и обновить IRCd)
 * sadmin - Администратор сервисов (назначается исключительно администрацией IRC сети)
 * netadmin - Администратор сети (назначается исключительно администрацией IRC сети)
 *
 * Уровни доступа для параметра flags, не входящие
 * в выдаваемые level права доступа:
 * can_die - Можно завершать работу сервера (команда /die)
 * can_restart - Можно перезапускать сервер (команда /restart)
 * can_addline - Можно добавлять строки в конфигурацию сервера (команда /addline)
 */

oper JSergey {
	from {
		/* Разрешенные адреса */
		userhost *@127.0.0.1;
	};
	password "XXXXX"; /* Пароль */
	class opers;
	level admin; /* Уровень доступа. Описание находится выше. */
	/* Раскомментируйте следующие строки, если требуется
	 * разрешить оператору выполнять указанные действия
	 * (описание см. выше)
	 */
	/*
	flags {
		can_die;
		can_restart;
		can_addline;
	};
	*/
};

/* ПАРОЛИ
 * Данный блок должен быть отредактирован
 */

drpass {
	restart "restartpass"; /* Пароль для перезапуска сервера */
	die "diepass"; /* Пароль для остановки сервера */
};

/* ЖУРНАЛЫ СЕРВЕРА
 * Данный блок настраивается по желанию администратора
 */

log "ircd.log" {
	 /* Предельный размер журнала. При достижении предела
	  * журнал будет удален и начат заново.
	  */
	maxsize 5MB;
	flags {
		errors;
		kills;
		tkl;
		/* connects; */
		server-connects;
		kline;
		oper;
		sadmin-commands;
		chg-commands;
		oper-override;
		spamfilter;
	};
};

/* ОБЩАЯ КОНФИГУРАЦИЯ СЕРВЕРА
 * Данный блок должен быть отредактирован
 */

set {
	/* КОНТАКТНЫЙ АДРЕС
	 * Укажите E-Mail адрес или URL (в формате http://адрес),
	 * который будет показываться забаненным локально
	 * пользователям.
	 */
	kline-address "http://www.ircline.ru";
	/* ЛОКАЛЬНЫЕ ПОСТФИКСЫ ДЛЯ КЛИЕНТОВ СЕРВЕРА
	 * Если к серверу подключается локальный пользователь,
	 * не имеющий обратной зоны, то он получает адрес вида
	 * 192-168-0-1.setka.ircline.ru, где setka - название
	 * локальной сети. На клиентов с обратной DNS зоной
	 * этот параметр никак не влияет. Укажите название
	 * локальной сети вместо setka в строке ниже или
	 * задайте свое окончание для локальных постфиксов.
	 */
	local-postfix "setka.ircline.ru";
	/* ЛОКАЛЬНЫЕ ПОСТФИКСЫ ДЛЯ ВСЕХ ЛОКАЛЬНЫХ ПОЛЬЗОВАТЕЛЕЙ
	 * Если включить этот параметр, то локальный постфикс
	 * будет установлен всем локальным пользователям, даже имеющим
	 * обратную DNS зону. Включение этого параметра позволяет
	 * привести адреса всех пользователей к одному виду.
	 */
	local-postfix-for-all no;
	/* ПАРАМЕТРЫ DNS */
	dns {
		nameserver 127.0.0.1; /* Имя DNS сервера */
		timeout 3s;
		retries 3;
	};
};

/* МОДУЛИ
 * Данный блок редактировать не требуется
 * Не добавляйте и не удаляйте модули без согласования с
 * администрацией сети, к которой прилинкован сервер
 */

loadmodule "modules/commands.so";
loadmodule "modules/m_chgswhois.so";
loadmodule "modules/m_getinfo.so";
loadmodule "modules/m_nocodes.so";
loadmodule "modules/m_privdeaf.so";
loadmodule "modules/nocloak.so";
loadmodule "modules/noctcp.so";

/* ВКЛЮЧЕНИЯ ДРУГИХ ФАЙЛОВ КОНФИГУРАЦИИ
 * Данный блок редактировать не требуется
 */

include "aliases.conf";
include "badwords.conf";
include "help.conf";
include "network.conf";
